<!DOCTYPE html>
<html>
  <head>
    <title>Instabooks</title>
    <%= stylesheet_link_tag "application", :media => "all" %>
    <%= yield :head %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
    <%= yield :facebook_meta_tags %>
  </head>
  <body class='<%= @body_class %>'>
    <% if current_user %>
      <header>
        <div class='container'>
          <hgroup class='logo'>
            <h1><%= link_to 'Instabooks', root_path %></h1>
          </hgroup>

          <div class='user-info'>
            <div class='actions dropdown'>
              <button class='button'>Menu</button>
              <ul>
                <li><%= link_to_modal "Create album", new_album_path %></li>
                <li class='last'><%= link_to "Sign out", signout_path %></li>
              </ul>
            </div>
          </div>
        </div>
      </header>

      <div class='container'>
        <%= yield %>
      </div>
    <% else %>
      <div class='content'>
        <hgroup class='logo'>
          <h1>Instabooks</h1>
          <h2>
            Create photo books from
            <br>
            your Instagram photos
          </h2>
        </hgroup>

        <%= link_to "Connect your Instagram account", "/auth/instagram", class: 'button connect' %>
      </div>
    <% end %>

    <%= yield :javascripts %>
    <div id="fb-root"></div>

    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=303647479786639";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
  </body>
</html>
